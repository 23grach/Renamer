<!DOCTYPE html>
<html>
<head>
  <style>
   body {
  font-family: Inter, sans-serif;
  padding: 16px 20px;
  color: #333;
  display: flex;
  flex-direction: column;
  height: 100vh;
  margin: 0;
  overflow: hidden;
}

.settings-section {
  overflow-y: auto;
  flex: 1;
}

.layer-type-title {
  font-size: 12px;
  font-weight: 800;
  margin: 0;
  flex: 1;
}

.layer-type-title {
  font-size: 12x;
  font-weight: 600;
  color: #1E1E1E;
  margin: 0;
  flex: 1;
}

.setting-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  gap: 8px;
}

.setting-item input[type="checkbox"] {
  flex-shrink: 0;
  margin: 0;
  width: 14px;
  height: 14px;
}

.setting-item label {
  font-size: 12px;
  line-height: 1.4;
  flex: 1;
  margin: 0;
}

.section {
  margin-bottom: 24px;
}

.footer {
  padding-top: 12px;
  padding-bottom: 12px;
  border-top: 1px solid #E5E5E5;
  text-align: center;
  font-size: 12px;
  color: #666;
  background: white;
  position: sticky;
  bottom: 0;
}

.footer a {
  color: #18A0FB;
  text-decoration: none;
}

.footer a:hover {
  text-decoration: underline;
}

.version {
  margin-top: 4px;
  font-size: 10px;
  color: #999;
}

.version a {
  color: #999;
  text-decoration: none;
}

.version a:hover {
  text-decoration: underline;
}

.group-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.group-switch {
  appearance: none;
  width: 36px;
  height: 20px;
  background: #ccc;
  border-radius: 999px;
  position: relative;
  outline: none;
  cursor: pointer;
  transition: background 0.2s ease;
}

.group-switch::before {
  content: "";
  width: 16px;
  height: 16px;
  background: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: transform 0.2s ease;
}

.group-switch:checked {
  background: #18A0FB;
}

.group-switch:checked::before {
  transform: translateX(16px);
}

.group-disabled .setting-item {
  opacity: 0.5;
  pointer-events: none;
}

.group-settings {
}

  </style>
</head>
<body>
  <div class="settings-section">
    <!-- Text Layers -->
    <div class="section" id="textLayerSection">
      <div class="group-toggle">
        <div class="layer-type-header">üÖ∞Ô∏è Text Layers</div>
        <input type="checkbox" class="group-switch" id="toggleTextGroup" checked>
      </div>
      <div class="group-settings">
        <div class="setting-item">
          <input type="checkbox" id="useTextContent" checked>
          <label for="useTextContent">Use content as name</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeTextColor" checked>
          <label for="includeTextColor">Include text color</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeTextStyle" checked>
          <label for="includeTextStyle">Include text style name</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeTextOpacity" checked>
          <label for="includeTextOpacity">Include opacity</label>
        </div>
      </div>
    </div>

    <!-- Containers -->
    <div class="section" id="containerLayerSection">
      <div class="group-toggle">
        <div class="layer-type-header">üì¶ Containers</div>
        <input type="checkbox" class="group-switch" id="toggleContainerGroup" checked>
      </div>
      <div class="group-settings">
        <div class="setting-item">
          <input type="checkbox" id="includeContainerType" checked>
          <label for="includeContainerType">Include container type</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeContainerSize" checked>
          <label for="includeContainerSize">Include container size</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeChildrenCount" checked>
          <label for="includeChildrenCount">Include number of children</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeContainerOpacity" checked>
          <label for="includeContainerOpacity">Include opacity</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="useFirstTextContent" checked>
          <label for="useFirstTextContent">Use first text layer content</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="useAutoLayoutNames" checked>
          <label for="useAutoLayoutNames">Use Auto Layout names</label>
        </div>
      </div>
    </div>

    <!-- Figures -->
    <div class="section" id="figureLayerSection">
      <div class="group-toggle">
        <div class="layer-type-header">üß© Figures</div>
        <input type="checkbox" class="group-switch" id="toggleFigureGroup" checked>
      </div>
      <div class="group-settings">
        <div class="setting-item">
          <input type="checkbox" id="includeShapeType" checked>
          <label for="includeShapeType">Include shape type</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeShapeSize" checked>
          <label for="includeShapeSize">Include size</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeFillColor" checked>
          <label for="includeFillColor">Include fill color</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeStrokeSettings" checked>
          <label for="includeStrokeSettings">Include stroke settings</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeCornerRadius" checked>
          <label for="includeCornerRadius">Include corner radius</label>
        </div>
        <div class="setting-item">
          <input type="checkbox" id="includeFigureOpacity" checked>
          <label for="includeFigureOpacity">Include opacity</label>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">
    Made with ‚ù§Ô∏è by <a href="https://gr-ch.ru" target="_blank">grach</a>
    <div class="version"><a href="https://github.com/23grach/Renamer" target="_blank">v4.0.0</a></div>
  </div>

  <script>
    // Function to get current settings
    function getCurrentSettings() {
      return {
        // Text Layers
        enableTextLayers: document.getElementById('toggleTextGroup').checked,
        useTextContent: document.getElementById('useTextContent').checked,
        includeTextColor: document.getElementById('includeTextColor').checked,
        includeTextStyle: document.getElementById('includeTextStyle').checked,
        includeTextOpacity: document.getElementById('includeTextOpacity').checked,

        // Containers
        enableContainers: document.getElementById('toggleContainerGroup').checked,
        includeContainerType: document.getElementById('includeContainerType').checked,
        includeContainerSize: document.getElementById('includeContainerSize').checked,
        includeChildrenCount: document.getElementById('includeChildrenCount').checked,
        includeContainerOpacity: document.getElementById('includeContainerOpacity').checked,
        useFirstTextContent: document.getElementById('useFirstTextContent').checked,
        useAutoLayoutNames: document.getElementById('useAutoLayoutNames').checked,

        // Figures
        enableFigures: document.getElementById('toggleFigureGroup').checked,
        includeShapeType: document.getElementById('includeShapeType').checked,
        includeShapeSize: document.getElementById('includeShapeSize').checked,
        includeFillColor: document.getElementById('includeFillColor').checked,
        includeStrokeSettings: document.getElementById('includeStrokeSettings').checked,
        includeCornerRadius: document.getElementById('includeCornerRadius').checked,
        includeFigureOpacity: document.getElementById('includeFigureOpacity').checked
      };
    }

    // Function to save settings
    function saveSettings() {
      const settings = getCurrentSettings();
      parent.postMessage({ 
        pluginMessage: { 
          type: 'save-settings',
          settings
        }
      }, '*');
    }

    // Function to toggle section enabled state
    function toggleSection(sectionId, enabled) {
      const section = document.getElementById(sectionId);
      if (enabled) {
        section.classList.remove('group-disabled');
      } else {
        section.classList.add('group-disabled');
      }
    }

    // Add event listeners to group toggles
    document.getElementById('toggleTextGroup').addEventListener('change', (e) => {
      toggleSection('textLayerSection', e.target.checked);
      saveSettings();
    });

    document.getElementById('toggleContainerGroup').addEventListener('change', (e) => {
      toggleSection('containerLayerSection', e.target.checked);
      saveSettings();
    });

    document.getElementById('toggleFigureGroup').addEventListener('change', (e) => {
      toggleSection('figureLayerSection', e.target.checked);
      saveSettings();
    });

    // Add event listeners to all checkboxes
    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      checkbox.addEventListener('change', saveSettings);
    });

    // Function to apply settings to UI
    function applySettings(settings) {
      // Text Layers
      document.getElementById('toggleTextGroup').checked = settings.enableTextLayers !== undefined ? settings.enableTextLayers : true;
      document.getElementById('useTextContent').checked = settings.useTextContent !== undefined ? settings.useTextContent : true;
      document.getElementById('includeTextColor').checked = settings.includeTextColor !== undefined ? settings.includeTextColor : true;
      document.getElementById('includeTextStyle').checked = settings.includeTextStyle !== undefined ? settings.includeTextStyle : true;
      document.getElementById('includeTextOpacity').checked = settings.includeTextOpacity !== undefined ? settings.includeTextOpacity : true;

      // Containers
      document.getElementById('toggleContainerGroup').checked = settings.enableContainers !== undefined ? settings.enableContainers : true;
      document.getElementById('includeContainerType').checked = settings.includeContainerType !== undefined ? settings.includeContainerType : true;
      document.getElementById('includeContainerSize').checked = settings.includeContainerSize !== undefined ? settings.includeContainerSize : true;
      document.getElementById('includeChildrenCount').checked = settings.includeChildrenCount !== undefined ? settings.includeChildrenCount : true;
      document.getElementById('includeContainerOpacity').checked = settings.includeContainerOpacity !== undefined ? settings.includeContainerOpacity : true;
      document.getElementById('useFirstTextContent').checked = settings.useFirstTextContent !== undefined ? settings.useFirstTextContent : true;
      document.getElementById('useAutoLayoutNames').checked = settings.useAutoLayoutNames !== undefined ? settings.useAutoLayoutNames : true;

      // Figures
      document.getElementById('toggleFigureGroup').checked = settings.enableFigures !== undefined ? settings.enableFigures : true;
      document.getElementById('includeShapeType').checked = settings.includeShapeType !== undefined ? settings.includeShapeType : true;
      document.getElementById('includeShapeSize').checked = settings.includeShapeSize !== undefined ? settings.includeShapeSize : true;
      document.getElementById('includeFillColor').checked = settings.includeFillColor !== undefined ? settings.includeFillColor : true;
      document.getElementById('includeStrokeSettings').checked = settings.includeStrokeSettings !== undefined ? settings.includeStrokeSettings : true;
      document.getElementById('includeCornerRadius').checked = settings.includeCornerRadius !== undefined ? settings.includeCornerRadius : true;
      document.getElementById('includeFigureOpacity').checked = settings.includeFigureOpacity !== undefined ? settings.includeFigureOpacity : true;

      // Update section states
      toggleSection('textLayerSection', settings.enableTextLayers !== undefined ? settings.enableTextLayers : true);
      toggleSection('containerLayerSection', settings.enableContainers !== undefined ? settings.enableContainers : true);
      toggleSection('figureLayerSection', settings.enableFigures !== undefined ? settings.enableFigures : true);
    }

    // Save settings when window is about to close
    window.addEventListener('beforeunload', saveSettings);

    window.onmessage = (event) => {
      const message = event.data.pluginMessage;
      
      if (message.type === 'load-settings') {
        applySettings(message.settings);
      }
    };
  </script>
</body>
</html> 